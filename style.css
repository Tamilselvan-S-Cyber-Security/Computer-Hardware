.direction-ltr {
	direction: ltr;
}

@keyframes tip-fade {
	from,
	to {
		opacity: 0;
	}
	20%,
	80% {
		opacity: 1;
	}
}

/* Simplified Mermaid styling for version 11.12.0 compatibility */
.mermaid {
	font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.mermaid .node rect {
	fill: #171717;
	stroke: #6c757d;
	stroke-width: 2px;
}

.mermaid .node text {
	fill: #ffffff;
	font-size: 14px;
}

.mermaid .edgePath .path {
	stroke: #6c757d;
	stroke-width: 2px;
}

.mermaid .edgeLabel {
	background-color: #171717;
	border: 1px solid #dee2e6;
	border-radius: 4px;
	padding: 4px 8px;
	color: #ffffff;
}

/* Touch-friendly improvements */
@media (max-width: 768px) {
	.mermaid {
		font-size: 12px;
		overflow: visible;
	}
	
	/* Larger touch targets */
	button, select, textarea {
		min-height: 48px;
		min-width: 48px;
		padding: 12px;
	}
	
	/* Better spacing for mobile */
	.flex {
		gap: 1.5rem;
	}
	
	/* Remove hover effects on touch devices */
	.mermaid .node:hover {
		transform: none;
	}
	
	/* Ensure proper display on mobile */
	.mermaid-container {
		overflow: auto;
		-webkit-overflow-scrolling: touch;
	}
}

/* Touch hover effects with white borders */
button:hover, 
button:focus,
select:hover,
select:focus,
textarea:hover,
textarea:focus {
	border-color: #ffffff !important;
	border-width: 2px !important;
	box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2) !important;
}

/* Touch-friendly button styles */
button:active {
	background-color: #374151 !important;
	border-color: #ffffff !important;
}

/* Enhanced touch targets for better accessibility */
@media (hover: none) and (pointer: coarse) {
	button, select, textarea {
		border: 2px solid transparent;
		transition: border-color 0.2s ease;
	}
	
	button:active, 
	select:active, 
	textarea:active {
		border-color: #ffffff !important;
		background-color: #374151 !important;
	}
}

/* Remove problematic hover effects for touch devices */
.mermaid .node {
	transition: none !important;
}

/* Ensure proper preview display */
.mermaid {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Fix preview container */
.mermaid-container {
	width: 100%;
	height: 100%;
	overflow: auto;
	position: relative;
}

/* Enhanced responsive design */
@media (max-width: 640px) {
	.mermaid-container {
		padding: 8px;
		min-height: 300px;
	}
	
	/* Mobile zoom controls */
	.zoom-controls {
		gap: 4px;
		top: 8px;
		right: 8px;
	}
	
	.zoom-controls button {
		width: 32px;
		height: 32px;
		font-size: 12px;
	}
}

/* Enhanced dark theme support for Mermaid */
.mermaid {
	background: transparent !important;
}

.mermaid .node rect,
.mermaid .node circle,
.mermaid .node ellipse,
.mermaid .node polygon {
	transition: all 0.2s ease;
}

/* Dark theme specific Mermaid styling */
[data-theme="dark"] .mermaid .node rect,
[data-theme="dark"] .mermaid .node circle,
[data-theme="dark"] .mermaid .node ellipse,
[data-theme="dark"] .mermaid .node polygon {
	fill: #374151 !important;
	stroke: #6B7280 !important;
	stroke-width: 2px !important;
}

[data-theme="dark"] .mermaid .nodeLabel {
	color: #FFFFFF !important;
	font-weight: 500 !important;
}

[data-theme="dark"] .mermaid .edgePath .path {
	stroke: #FFFFFF !important;
	stroke-width: 2px !important;
}

[data-theme="dark"] .mermaid .edgeLabel {
	background-color: #1F2937 !important;
	color: #FFFFFF !important;
	border: 1px solid #4B5563 !important;
	border-radius: 4px !important;
}

[data-theme="dark"] .mermaid .node .label {
	color: #FFFFFF !important;
}

[data-theme="dark"] .mermaid .node .label text {
	fill: #FFFFFF !important;
}

/* Override any Mermaid default styling for dark theme */
[data-theme="dark"] .mermaid .node rect,
[data-theme="dark"] .mermaid .node circle,
[data-theme="dark"] .mermaid .node ellipse,
[data-theme="dark"] .mermaid .node polygon {
	fill: #374151 !important;
	stroke: #6B7280 !important;
	stroke-width: 2px !important;
}

[data-theme="dark"] .mermaid .nodeLabel {
	color: #FFFFFF !important;
	font-weight: 500 !important;
}

[data-theme="dark"] .mermaid .node .label {
	color: #FFFFFF !important;
}

[data-theme="dark"] .mermaid .node .label text {
	fill: #FFFFFF !important;
}

/* Light theme specific Mermaid styling */
[data-theme="light"] .mermaid .node rect,
[data-theme="light"] .mermaid .node circle,
[data-theme="light"] .mermaid .node ellipse,
[data-theme="light"] .mermaid .node polygon {
	fill: #FFFFFF !important;
	stroke: #D1D5DB !important;
	stroke-width: 2px !important;
}

[data-theme="light"] .mermaid .nodeLabel {
	color: #000000 !important;
	font-weight: 500 !important;
}

[data-theme="light"] .mermaid .edgePath .path {
	stroke: #6B7280 !important;
	stroke-width: 2px !important;
}

[data-theme="light"] .mermaid .edgeLabel {
	background-color: #FFFFFF !important;
	color: #000000 !important;
	border: 1px solid #D1D5DB !important;
	border-radius: 4px !important;
}

[data-theme="light"] .mermaid .node .label {
	color: #000000 !important;
}

[data-theme="light"] .mermaid .node .label text {
	fill: #000000 !important;
}

/* Force all light theme nodes to have consistent styling */
[data-theme="light"] .mermaid .node {
	fill: #FFFFFF !important;
	stroke: #D1D5DB !important;
}

[data-theme="light"] .mermaid .node text {
	fill: #000000 !important;
}

/* Additional light theme overrides for all node types */
[data-theme="light"] .mermaid .node rect,
[data-theme="light"] .mermaid .node circle,
[data-theme="light"] .mermaid .node ellipse,
[data-theme="light"] .mermaid .node polygon,
[data-theme="light"] .mermaid .node path {
	fill: #FFFFFF !important;
	stroke: #D1D5DB !important;
}

[data-theme="light"] .mermaid .node .label,
[data-theme="light"] .mermaid .nodeLabel,
[data-theme="light"] .mermaid .node text,
[data-theme="light"] .mermaid .node tspan {
	color: #000000 !important;
	fill: #000000 !important;
}

/* Enhanced template selector scrolling */
select {
	max-height: 200px !important;
	overflow-y: auto !important;
	scrollbar-width: thin !important;
	scrollbar-color: #6B7280 #374151 !important;
}

select::-webkit-scrollbar {
	width: 8px !important;
}

select::-webkit-scrollbar-track {
	background: #374151 !important;
	border-radius: 4px !important;
}

select::-webkit-scrollbar-thumb {
	background: #6B7280 !important;
	border-radius: 4px !important;
}

select::-webkit-scrollbar-thumb:hover {
	background: #9CA3AF !important;
}

/* Dark theme scrollbar */
[data-theme="dark"] select::-webkit-scrollbar-track {
	background: #1F2937 !important;
}

[data-theme="dark"] select::-webkit-scrollbar-thumb {
	background: #4B5563 !important;
}

[data-theme="dark"] select::-webkit-scrollbar-thumb:hover {
	background: #6B7280 !important;
}

/* Light theme scrollbar */
[data-theme="light"] select::-webkit-scrollbar-track {
	background: #F3F4F6 !important;
}

[data-theme="light"] select::-webkit-scrollbar-thumb {
	background: #D1D5DB !important;
}

[data-theme="light"] select::-webkit-scrollbar-thumb:hover {
	background: #9CA3AF !important;
}

/* Fullscreen styles */
.mermaid-container:fullscreen {
	background: #212121 !important;
	padding: 20px !important;
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
}

.mermaid-container:-webkit-full-screen {
	background: #212121 !important;
	padding: 20px !important;
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
}

.mermaid-container:-moz-full-screen {
	background: #212121 !important;
	padding: 20px !important;
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
}

.mermaid-container:-ms-fullscreen {
	background: #212121 !important;
	padding: 20px !important;
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
}

/* Fullscreen Mermaid styling */
:fullscreen .mermaid {
	max-width: 100% !important;
	max-height: 100% !important;
	width: auto !important;
	height: auto !important;
}

:-webkit-full-screen .mermaid {
	max-width: 100% !important;
	max-height: 100% !important;
	width: auto !important;
	height: auto !important;
}

:-moz-full-screen .mermaid {
	max-width: 100% !important;
	max-height: 100% !important;
	width: auto !important;
	height: auto !important;
}

:-ms-fullscreen .mermaid {
	max-width: 100% !important;
	max-height: 100% !important;
	width: auto !important;
	height: auto !important;
}

/* Enhanced fullscreen controls */
:fullscreen .zoom-controls {
	position: fixed !important;
	top: 20px !important;
	right: 20px !important;
	z-index: 9999 !important;
}

:-webkit-full-screen .zoom-controls {
	position: fixed !important;
	top: 20px !important;
	right: 20px !important;
	z-index: 9999 !important;
}

:-moz-full-screen .zoom-controls {
	position: fixed !important;
	top: 20px !important;
	right: 20px !important;
	z-index: 9999 !important;
}

:-ms-fullscreen .zoom-controls {
	position: fixed !important;
	top: 20px !important;
	right: 20px !important;
	z-index: 9999 !important;
}

/* Fullscreen button enhancements */
:fullscreen button {
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
	backdrop-filter: blur(10px) !important;
}

:-webkit-full-screen button {
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
	backdrop-filter: blur(10px) !important;
}

:-moz-full-screen button {
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
	backdrop-filter: blur(10px) !important;
}

:-ms-fullscreen button {
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
	backdrop-filter: blur(10px) !important;
}

/* JSON Fullscreen Mode */
.json-fullscreen {
	position: fixed !important;
	top: 0 !important;
	left: 0 !important;
	width: 100vw !important;
	height: 100vh !important;
	z-index: 9999 !important;
	background-color: #212121 !important;
	padding: 20px !important;
}

.json-fullscreen textarea {
	font-size: 16px !important;
	line-height: 1.6 !important;
	min-height: calc(100vh - 100px) !important;
}

.json-fullscreen button {
	position: absolute !important;
	top: 20px !important;
	right: 20px !important;
	z-index: 10000 !important;
}

/* Dark theme for JSON fullscreen */
[data-theme="dark"] .json-fullscreen {
	background-color: #212121 !important;
}

[data-theme="dark"] .json-fullscreen textarea {
	background-color: #171717 !important;
	border-color: #374151 !important;
	color: #FFFFFF !important;
}

/* Light theme for JSON fullscreen */
[data-theme="light"] .json-fullscreen {
	background-color: #F9FAFB !important;
}

[data-theme="light"] .json-fullscreen textarea {
	background-color: #FFFFFF !important;
	border-color: #D1D5DB !important;
	color: #000000 !important;
}

/* Comprehensive dark theme override to fix inconsistent colors */
[data-theme="dark"] .mermaid .node,
[data-theme="dark"] .mermaid .node rect,
[data-theme="dark"] .mermaid .node circle,
[data-theme="dark"] .mermaid .node ellipse,
[data-theme="dark"] .mermaid .node polygon,
[data-theme="dark"] .mermaid .node path {
	fill: #374151 !important;
	stroke: #6B7280 !important;
	background-color: #374151 !important;
}

[data-theme="dark"] .mermaid .node text,
[data-theme="dark"] .mermaid .nodeLabel,
[data-theme="dark"] .mermaid .node .label,
[data-theme="dark"] .mermaid .node .label text,
[data-theme="dark"] .mermaid .node tspan {
	color: #FFFFFF !important;
	fill: #FFFFFF !important;
}

/* Additional text styling for consistency */
[data-theme="dark"] .mermaid text {
	fill: #FFFFFF !important;
}

/* White connecting lines for dark theme */
[data-theme="dark"] .mermaid .edgePath .path,
[data-theme="dark"] .mermaid .edgePath,
[data-theme="dark"] .mermaid .edgeLabel,
[data-theme="dark"] .mermaid .flowchart-link,
[data-theme="dark"] .mermaid .flowchart-link path {
	stroke: #FFFFFF !important;
	stroke-width: 2px !important;
}

[data-theme="light"] .mermaid text {
	fill: #1F2937 !important;
}

/* Ensure all node types have consistent styling */
[data-theme="dark"] .mermaid .node {
	fill: #374151 !important;
	stroke: #6B7280 !important;
}

/* Force all dark theme nodes to have consistent dark styling */
[data-theme="dark"] .mermaid .node rect,
[data-theme="dark"] .mermaid .node circle,
[data-theme="dark"] .mermaid .node ellipse,
[data-theme="dark"] .mermaid .node polygon,
[data-theme="dark"] .mermaid .node path {
	fill: #374151 !important;
	stroke: #6B7280 !important;
}

[data-theme="dark"] .mermaid .node .label,
[data-theme="dark"] .mermaid .nodeLabel,
[data-theme="dark"] .mermaid .node text,
[data-theme="dark"] .mermaid .node tspan {
	color: #FFFFFF !important;
	fill: #FFFFFF !important;
}

[data-theme="light"] .mermaid .node {
	fill: #FFFFFF !important;
	stroke: #D1D5DB !important;
}